p8105_hw2_yd2739
================
Yuxuan Du
2023-09-26

## Problem 1

We’ll use the data in `pols-month.csv`, `unemployment.csv`, and
`snp.csv`

**load `pols-month.csv`**

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
pols_month_df = 
  read_csv("HW2_P1_DATA/pols-month.csv")|>
  janitor::clean_names()|>
  separate(
    col = mon,
    into = c("year", "month", "day"), 
    sep = "-") |>
  mutate(
    month = case_match(
      month, 
      '01' ~ "January", 
      '02' ~ "February", 
      '03' ~ "March", 
      '04' ~ "April", 
      '05' ~ "May", 
      '06' ~ "June", 
      '07' ~ "July", 
      '08' ~ "August", 
      '09' ~ "September", 
      '10' ~ "October", 
      '11' ~ "November", 
      '12' ~ "December"
    )
  )|>
  mutate(
    president = case_match(
      prez_gop, 
      1 ~ "republican", 
      0 ~ "democratic"
    )
  )|>
  subset(select = -c(prez_gop, prez_dem, day))
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

**load `snp.csv`**

``` r
snp_df = 
  read_csv("HW2_P1_DATA/snp.csv")|>
  janitor::clean_names()|>
  separate(
    col = date,
    into = c("month", "day", "year"), 
    sep = "/") |>
  mutate(
    month = case_match(
      month, 
      '1' ~ "January", 
      '2' ~ "February", 
      '3' ~ "March", 
      '4' ~ "April", 
      '5' ~ "May", 
      '6' ~ "June", 
      '7' ~ "July", 
      '8' ~ "August", 
      '9' ~ "September", 
      '10' ~ "October", 
      '11' ~ "November", 
      '12' ~ "December"
    )
  )|>
  mutate(
    year = as.numeric(year)
  )|>
  mutate(
    year = ifelse(year>=50, 1900+year, 2000+year), 
    year = as.character(year)
  )|>
  relocate(c(year, month))
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

**load`unemployment.csv`**

``` r
unemployment_df = 
  read_csv("HW2_P1_DATA/unemployment.csv")|>
  janitor::clean_names()|>
  pivot_longer(
    jan:dec, 
    names_to = "month",
    values_to = "unemployment", 
  )|>
  mutate(
    year = as.character(year)
  )|>
  mutate(
    month = case_match(
      month, 
      'jan' ~ "January", 
      'feb' ~ "February", 
      'mar' ~ "March", 
      'apr' ~ "April", 
      'may' ~ "May", 
      'jun' ~ "June", 
      'jul' ~ "July", 
      'aug' ~ "August", 
      'sep' ~ "September", 
      'oct' ~ "October", 
      'nov' ~ "November", 
      'dec' ~ "December"
    )
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

**merge three dataframe**

``` r
P1_whole_df = 
  left_join(pols_month_df, snp_df, by = c("year", "month"))|>
  left_join(unemployment_df, by = c("year", "month"))
```

So the pols_month dataset contains the information of president,
governors, senators, and representatives from republican and democratic
during different period of time.

The snp dataset contains the Standard & Poor’s stock market index during
different period of time.

The unemployment dataset contains the unemployment rate in the US during
different period of time.

The time span of the dataset is from 1947 to 2015. The size of the
merged dataset is 822 x 12.

## Problem 2

``` r
# load the dataset, change the format of date, recalculate homes_powered
# also we noticed that the Gwynnda Trash Wheel only has the "plastic_bags" variable
# while other two dataset has "grocery_bags" and  "chip_bags" two variables 
# The number of grocery_bags and chip_bags are added together and form a new col
# "plastic_bags" to make a unify data. 
mr_trash_wheel_df = 
  readxl::read_excel("HW2_P2_DATA/202207 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N549")|>
  janitor::clean_names()|>
  mutate(
    date = substr(date, nchar(date) - 1, nchar(date))
  )|>
  mutate(
    plastic_bags = grocery_bags + chip_bags
  )|>
  subset(
    select = -c(grocery_bags, chip_bags)
    )|>
  mutate(
    homes_powered = (weight_tons*500/30)
  )|>
  mutate(name = "Mr_trash_wheel")

professor_trash_wheel_df = 
  readxl::read_excel("HW2_P2_DATA/202207 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", range = "A2:M96")|>
  janitor::clean_names()|>
  mutate(
    date = substr(date, nchar(date) - 1, nchar(date))
  )|>
  mutate(
    plastic_bags = grocery_bags + chip_bags
  )|>
  subset(
    select = -c(grocery_bags, chip_bags)
    )|>
  mutate(
    homes_powered = (weight_tons*500/30), 
    year = as.character(year)
  )|>
  mutate(name = "Professor_trash_wheel")

gwynnda_trash_wheel_df = 
  readxl::read_excel("HW2_P2_DATA/202207 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", range = "A2:K108")|>
  janitor::clean_names()|>
  mutate(
    date = substr(date, nchar(date) - 1, nchar(date))
  )|>
  mutate(
    homes_powered = (weight_tons*500/30),
    year = as.character(year)
  )|>
  mutate(name = "Gwynnda_trash_wheel")

trash_wheel_collection_df = 
  bind_rows(mr_trash_wheel_df, professor_trash_wheel_df, gwynnda_trash_wheel_df)

total_weight_professor = sum(pull(professor_trash_wheel_df, weight_tons))

total_cigarette_butts_gwynnda_july_2021 = subset(
  gwynnda_trash_wheel_df, 
  month == "July" & year == "2021"
  )|>
  pull(
    cigarette_butts
    )|>
  sum()
```

The size of the merged dataframe is 747 x 14. The `plastic_bags`
variables for Mr.Trash wheel and Professor Trash wheel are the total of
`chip_bags` and `grocery_bags` since Gwynnda trash wheel didn’t
separately count different bags.

Some interesting information: Only Mr.Trash Wheel has the variable of
`sports_ball`;

Gwynnda Trash Wheel does not have the variable `galss_bottles`;

The way of recording date is kind of redundant since there are variables
for year and month (the format of date is changed later)

There might be missing data in the dataset gwynnda_trash_wheel_df since
there are days they collected tons of trash while all trash category
counts is 0.

The total weight of trash collected by Professor Trash Wheel is 190.12.

The total number of cigarette butts collected by Gwynnda in July of 2021
is 1.63^{4}.
